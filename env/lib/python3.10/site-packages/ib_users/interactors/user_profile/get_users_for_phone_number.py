from ib_users.interactors.DTOs.common_dtos import PhoneNumberDTO
from ib_users.interactors.storages.user_profile_storage import UserProfileStorage
from ib_users.interactors.validators.phone_number_validator import PhoneNumberValidator


class GetUserIdForPhoneNumberInteractor:
    def __init__(
            self, user_profile_storage: UserProfileStorage,
            phone_number_validator: PhoneNumberValidator):
        self.user_profile_storage = user_profile_storage
        self.phone_number_validator = phone_number_validator

    def get_user_ids_for_phone_number(self, phone_number_dto: PhoneNumberDTO):
        self.phone_number_validator.validate(phone_number_dto)

        return self.user_profile_storage.get_user_ids_for_phone_number(
            phone_number_dto=phone_number_dto
        )
