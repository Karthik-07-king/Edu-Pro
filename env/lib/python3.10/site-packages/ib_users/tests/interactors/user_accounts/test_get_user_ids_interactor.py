from unittest.mock import create_autospec

from ib_users.interactors.storages.user_profile_storage import \
    UserProfileStorage
from ib_users.interactors.user_accounts.get_user_ids_interactor import \
    GetUserIdsInteractor


class TestGetUserIdsInteractor:

    def test_given_search_value_return_user_ids(self):
        # Arrange
        storage_mock = create_autospec(UserProfileStorage)
        user_ids = ["user_id1", "user_id2"]
        offset = 1
        limit = 1
        storage_mock.get_user_ids_by_name_or_email.return_value = user_ids
        interactor = GetUserIdsInteractor(profile_storage=storage_mock)
        search_value = "adi"
        # Act
        response = interactor.get_user_ids_wrapper(search_value=search_value,
                                                   offset=offset, limit=limit)
        # Assert
        assert response == user_ids

