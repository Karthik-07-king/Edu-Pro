import pytest
import mock
from django.test import override_settings

from ib_users.models import UserAccount, UserUniqueLoginDevice


@pytest.mark.django_db()
class TestValidateUserLoginDevicesDetailsInteractor:
    @pytest.fixture()
    def interactor(self):
        from ib_users.interactors.login.validate_user_login_device_details import \
            ValidateUserLoginDevicesDetailsInteractor
        from ib_users.storages.user_login_device_details_sql_storage import \
            UserLoginDeviceDetailsSQLStorage

        storage = UserLoginDeviceDetailsSQLStorage()
        interactor = ValidateUserLoginDevicesDetailsInteractor(
            user_login_devices_storage=storage)
        return interactor

    @override_settings(ENABLE_USER_DEVICES_INFORMATION=True)
    def test_devices_id_not_given_when_enable_login_device_logs_raises_exception(
            self, interactor):
        # arrange
        device_id = "Device1"
    
        # act
        interactor.validate_users_login_devices( device_id=device_id)
