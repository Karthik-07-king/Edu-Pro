from django.contrib import admin
from django.contrib.auth.admin import UserAdmin
from django.utils.translation import gettext, gettext_lazy as _

from ib_users.models import UserAccount, UserProfile, OTPBlacklist, OTPWhitelist, OTPVerification, ReferralDetails, \
    UserLoginDeviceDetails, UserSocialAccount, UserPasswordResetToken, \
    MessageTemplate, UserUniqueLoginDevice
from ib_users import models
from simple_history.admin import SimpleHistoryAdmin


class UserAccountAdmin(UserAdmin):
    list_display = ['username', 'user_id', 'country_code', 'phone_number',
                    'email']
    fieldsets = (
        (None, {'fields': ('username', 'password')}),
        (_('Personal info'), {'fields': ('first_name', 'last_name', 'email', 'country_code',
                                         'phone_number', 'iso_country_code')}),
        (_('Permissions'), {
            'fields': ('is_active', 'is_staff', 'is_superuser', 'groups', 'user_permissions'),
        }),
        (_('Important dates'), {'fields': ('last_login', 'date_joined')}),
    )


class UserProfileAdmin(admin.ModelAdmin):
    list_display = ['account_id', 'country_code', 'phone_number',
                    'email']


class UpdateUserAccountPhoneNumberLogAdmin(admin.ModelAdmin):
    list_display = [
        'user_account_id', 'old_phone_number', 'new_phone_number']
    list_filter = ['verification_status']
    search_fields = ['user_account__id']


class UserFingerprintJsLoginDeviceDetailsAdmin(admin.ModelAdmin):
    list_display = ['user_id', 'request_id', 'device_id']
    search_fields = ['user_id', 'request_id', 'device_id']


class FingerprintJsWebhookDetailsAdmin(admin.ModelAdmin):
    list_display = ['request_id', 'webhook_data']
    search_fields = ['request_id']


admin.site.register(UserAccount, UserAccountAdmin)
admin.site.register(UserProfile, UserProfileAdmin)
admin.site.register(OTPBlacklist)
admin.site.register(OTPWhitelist)
admin.site.register(OTPVerification)
admin.site.register(ReferralDetails)
admin.site.register(UserLoginDeviceDetails)
admin.site.register(UserSocialAccount)
admin.site.register(UserPasswordResetToken)
admin.site.register(MessageTemplate)
admin.site.register(UserUniqueLoginDevice)
admin.site.register(models.UserSocialProfileDetails, SimpleHistoryAdmin)
admin.site.register(models.UserAddressDetails, SimpleHistoryAdmin)
admin.site.register(models.UserCurrentProfessionalDetails, SimpleHistoryAdmin)
admin.site.register(models.UserSSCDetails, SimpleHistoryAdmin)
admin.site.register(models.UserIntermediateDetails, SimpleHistoryAdmin)
admin.site.register(models.UserDegreeDetails, SimpleHistoryAdmin)
admin.site.register(models.UserWorkExperienceDetails, SimpleHistoryAdmin)
admin.site.register(models.UserCompanyDetails, SimpleHistoryAdmin)
admin.site.register(models.UserPreferredLanguages, SimpleHistoryAdmin)
admin.site.register(models.UserProfessionalSkills, SimpleHistoryAdmin)
admin.site.register(models.UserGuardianDetails, SimpleHistoryAdmin)
admin.site.register(models.UserContactDetails, SimpleHistoryAdmin)
admin.site.register(
    models.UpdateUserAccountPhoneNumberLog,
    UpdateUserAccountPhoneNumberLogAdmin)
admin.site.register(models.UserFingerprintJsLoginDeviceDetails,
                    UserFingerprintJsLoginDeviceDetailsAdmin)
admin.site.register(models.FingerprintJsWebhookDetails,
                    FingerprintJsWebhookDetailsAdmin)
