from django.db import models

from ib_users.models import UserAccount


class UserLoginDeviceDetails(models.Model):
    user_account = models.ForeignKey(UserAccount, on_delete=models.CASCADE)
    access_token = models.CharField(
        max_length=100, db_index=True)  # TODO : doubt - is it required to put unique=True here?
    device_id = models.CharField(max_length=100)

    class Meta:
        app_label = 'ib_users'


class UserUniqueLoginDevice(models.Model):
    user_account = models.ForeignKey(UserAccount, on_delete=models.CASCADE)
    device_id = models.CharField(max_length=100)

    class Meta:
        app_label = 'ib_users'
        unique_together = ["user_account", "device_id"]

    def __str__(self):
        return f"<UserUniqueLoginDevice: {str(self.user_account_id)} - {self.device_id}>"
