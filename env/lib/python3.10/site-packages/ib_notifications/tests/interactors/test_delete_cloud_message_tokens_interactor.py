from mock import create_autospec

from ib_notifications.interactors.delete_all_cloud_message_tokens_interactor \
    import DeleteAllCloudMessageTokensInteractor
from ib_notifications.interactors.storages.storage_interface import \
    StorageInterface


class TestDeleteCloudMessageTokensInteractor:
    def test_with_user_id_deletes_user_cm_tokes(self):
        user_id = "1"

        storage_mock = create_autospec(StorageInterface)
        interactor = DeleteAllCloudMessageTokensInteractor(
            storage=storage_mock)

        interactor.delete_all_cloud_message_tokens(user_id=user_id)

        storage_mock.delete_cloud_message_tokens.assert_called_once_with(
            user_id=user_id)
