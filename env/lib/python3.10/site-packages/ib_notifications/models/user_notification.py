from django.db import models

from ib_notifications.models.notification import Notification


class UserNotification(models.Model):
    notification = models.ForeignKey(Notification, on_delete=models.CASCADE,
                                     related_name="user_notifications")
    read_at = models.DateTimeField(verbose_name="Read At", null=True,
                                   blank=True, default=None)
    user_id = models.CharField(max_length=250, db_index=True)
    is_deleted = models.BooleanField(default=False)

    class Meta:
        app_label = "ib_notifications"

    def __str__(self):
        return "{},{},{}".format(self.user_id, self.notification_id,
                                 self.read_at)
