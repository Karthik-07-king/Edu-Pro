Metadata-Version: 2.1
Name: ib_users
Version: 3.0.2
Summary: Automate API generation from swagger
Home-page: 
Author: 
Author-email: 
Keywords: ib_users
Classifier: Development Status :: 3 - Alpha
Classifier: Framework :: Django
Classifier: Framework :: Django :: 2.2
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: BSD License
Classifier: Natural Language :: English
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Requires-Dist: django<5,>=4.2
Requires-Dist: boto3<=2.0.0,>=1.9.155
Requires-Dist: django-storages==1.14.4
Requires-Dist: raven==6.10.0
Requires-Dist: enum34==1.1.6
Requires-Dist: mock<=4.0.3,>=3.0.5
Requires-Dist: pyotp==2.2.7
Requires-Dist: django-log-request-id==2.1.0
Requires-Dist: ib-common<5.0.0,>=4.0.0
Requires-Dist: django-swagger-utils<6.0.0,>=5.0.0
Requires-Dist: ib-django-fine-uploader-s3<3.0.0,>=2.0.0
Requires-Dist: Logentries==0.17
Requires-Dist: django-cors-headers==4.5.0
Requires-Dist: requests<=2.28.1,>=2.21.0
Requires-Dist: twython==3.7.0
Requires-Dist: twilio==7.3.1
Requires-Dist: django-simple-history==3.7.0

# ib_users_backend


## setup virtualenv

```sh
pip install virtualenv
virtualenv .venv
```

## install requirements

```bash
pip install -r requirements.txt

# if you ran into any issue with kerbrose package install below system dependencies
sudo apt-get install krb5-config libkrb5-dev libssl-dev libsasl2-dev libsasl2-modules-gssapi-mit

```

## running django management commands & usage

```sh
source .venv/bin/activate
export DJANGO_SETTINGS_MODULE=ib_users_backend.settings.local
python manage.py build -a ib_users
python manage.py makemigrations
python manage.py migrate
python manage.py createsuperuser
python manage.py runserver
```

Change History
==============

3.0.2 (2024-11-4)
++++++++++++++++++
 - Removed usage of Django Facebook package
 - Using Facebook social account through requests module


3.0.1 (2024-10-27)
++++++++++++++++++
 - Breaking change
 - Add support for django==4.2
 - Drop support for django<4.2


2.0.6 (2024-09-17)
+++++++++++++++++
 - Code Cleanups


2.0.4 - Jul 6th - 2023
++++++++++++++++++++++++
- Add `get_user_ids_for_phone_number_from_user_profile` interface method
- Add `logout_user_from_client` interface method
- Add `create_auth_tokens_for_user_client` interface method


2.0.3 - Jun 10th - 2023
++++++++++++++++++++++++
- pick phone number from `UserProfile` to send login otp in `send_login_otp_to_email_v2` method
- Add Interface method `update_user_account_verified_email` to update user account email without verification
- Add `activate_user` interface method
- Add `is_active` in `GetUserProfileDTO`


2.0.2 - Apr 29th - 2023
++++++++++++++++++++++++
- add last_name and cover_page_url keys in user profile presenter response


2.0.1 - Fed 22nd - 2023
++++++++++++++++++++++++
    - Fix issue with getting `expires_in` seconds
    - Update `expires_in` typing to int in `AccessTokenDTO` and `UserAuthTokensDTO`
    - Provide `send_login_otp_to_email_v2` service interface method
    - Add `SUBJECT_FOR_LOGIN_WITH_EMAIL_OTP` and `TEMPLATE_FOR_LOGIN_WITH_EMAIL_OTP` env variables



2.0.0 - Aug 6th - 2022
++++++++++++++++++++++++++
- Update packages in requirements.txt to latest versions
- Remove unused packages from requirements.txt
- Add dependencies_update.md file to give info about requirement updates

1.3.25 - Jul 22nd - 2022
++++++++++++++++++++++++++
 - Changes related to update user account phone number
    - Added `SWAP_PHONE_NUMBERS_WHILE_UPDATING` as environment variable
    - remove validation for phone number exists for another user account when env variable is set to true

1.3.24 - Jul 19th - 2022
++++++++++++++++++++++++++
 - Changes related to create_or_update_user_profile_details
    - Add flexibility like whether we need to consider the field value or not while updating

1.3.23 - Jun 29th - 2022
++++++++++++++++++++++++++
 - Bug fix with send_otp_through in update phone number service method

1.3.22 - May 28th - 2022
++++++++++++++++++++++++++
 - Add verified_datetime field in UpdateUserAccountPhoneNumberLog model
 - Add user can update phone number or not fields in get_user_profiles_with_contact_details interface method response

1.3.21 - April 27th - 2022
++++++++++++++++++++++++++
    - Store given device id when user device information log feature not enabled

1.3.20 - April 24th - 2022
++++++++++++++++++++++++++
- Add country details related optional fields (country_id & country_name) in below mentioned things
 - UserDegreeDetails Model
 - create_or_update_user_education_details service interface method request
 - get_user_education_details service interface method response
 - get_user_complete_profile_details service interface method response


1.3.19 - April 16th - 2022
++++++++++++++++++++++++++
- Add Fingerprint js service to store user login device details


1.3.18 - March 21st - 2022
++++++++++++++++++++++++++++
- Added user unique login devices logs feature
    - Added `ENABLE_USER_DEVICES_INFORMATION` as environment variable
    - Accept `device_id` as input parameter for all login related APIs and service interface method
    - Raised the following exceptions while handling login with devices
        - DeviceDetailsShouldBeGivenException

1.3.17 - March 4th - 2022
*************************

- Add functionality related to update user account phone number
 - Add new model UpdateUserAccountPhoneNumberLog
 - Add new service interface methods
  - update_user_account_phone_number
  - send_otp_to_user_updated_phone_number
  - verify_update_phone_number_otp


1.3.16 - February 23rd - 2022
***************************

- Add have_work_experience (Optional) field
 - UserCurrentProfessionalDetails model
 - create_or_update_user_professional_details interface method request dto
 - get_user_profile_complete_details interface method response dto


1.3.15 - February 8th - 2022
*************************

- Add new interface method
 - create_or_update_user_social_profile_details


1.3.14 - February 7th - 2022
*************************

- Add new interface method
 - get_user_profiles_with_contact_details


1.3.13 - February 2nd - 2022
*************************

- Add other department name(optional)
 - In UserDegreeDetails model
 - create_or_update_user_education_details interface method input
 - get_user_profile_complete_details interface method response
 - get_user_education_details interface method response


1.3.12 - January 25th - 2022
*************************

- Bug fix with uuid in comparing the given user_id with existing_user_id for email in update email


1.3.11 - January 9th - 2022
*************************

- Add new optional field have_whatsapp in user contact details and below interface methods
 - create_or_update_user_profile_details
 - get_user_profile_complete_details


1.3.10 - January 8th - 2022
*************************

- Add other city name (optional parameter) in request dto for below interface methods
 - create_or_update_user_education_details (in degree details)
 - create_or_update_user_professional_details (in company details)
- Add other city name in in response dto for below interface methods
 - get_user_profile_complete_details
 - get_user_education_details
 - get_user_professional_details
- Bug fixes in removing user existing details in update details when given empty
 - company details, professional skills, preferred languages


1.3.9 - December 27th - 2021

- Updated higher education course fields in UserCurrentProfessionalDetails model
 - Removed higher_education_course_id, higher_education_course_name, other_course_name
 - updated it to higher_education_course_type
- Added i_want_to_receive_updates_directly_on_whatsapp field in UserGuardianDetails model
 - Added in create_or_update_user_guardian_details interface method


1.3.8 - December 24th - 2021

- Added iso_country_code in update user profile details


1.3.7 - December 23rd - 2021

- Added new models related to user complete profile details
 - UserSocialProfileDetails
 - UserAddressDetails
 - UserCurrentProfessionalDetails
 - UserSSCDetails
 - UserIntermediateDetails
 - UserDegreeDetails
 - UserWorkExperienceDetails
 - UserCompanyDetails
 - UserPreferredLanguages
 - UserProfessionalSkills
 - UserGuardianDetails
 - UserContactDetails
- Added update & get service interface methods for this new models


1.3.6 - December 14th - 2021
++++++

- Added iso_country_code optional field in UserAccount & UserProfile model
- Added iso_country_code in below methods
 - create_user_account_with_phone_number
 - create_user_profile
 - get_user_profile
 - get_user_profiles_bulk


1.3.5 - November 29th - 2021
++++++

- Added send_otp_through as argument for below interface methods & added default value as SMS
 - send_otp_to_verify_account_phone_number
 - request_login_otp
 - send_login_otp_to_phone_number
- Updated call service impl with msg91 service


1.3.4 - November 22nd - 2021
++++++

- Moved otp length from constants to env variable with default value as 6
- Changes related send SMS for international mobile number using twilio
    - Add boolean environment variable `USE_TWILIO_FOR_INTERNATIONAL_NUMBERS`


1.3.3 - November 10th - 2021
++++++

Bug fix in Email Already Linked Verification Logic in below interface methods
 - send_otp_to_verify_account_email
 - verify_account_email_otp

1.3.2 - November 3rd - 2021
++++++

Fix issues with datetimes when USE_TZ is enabled in project settings

1.3.1 - October 30th - 2021
++++++

Bug fix in logout from all devices related logic

When the device information is not stored

1.3.0 - October 29th - 2021
++++++

Bug fix in logout from all devices related logic

When the device information is not stored

1.2.5 - September 13th - 2021
++++++

Added new interface method

- get_user_ids_for_given_phone_numbers


1.2.4 - Jun 26th - 2021
++++++

Added 2 new interface methods for existing intractors in service interface

- SendOTPToUserGivenEmail
- LoginWithEmailAndOTP


1.2.3 - May 28th - 2021
++++++

Added login & register with facebook methods in service interface
Added custom logic of adding email to account on facebook based profile creation


1.2.2 - May 13th - 2021
++++++

Added index on fields in otp verification table


1.2.1 - May 13th - 2021
++++++

Added index on access_token field in user login device details table

1.2.0 - Mar 9th - 2021
++++++

Add environment variable RESET_PASSWORD_LINK_DLT_TEMPLATE_ID
Add dlt_template_id as argument in send_reset_password_link sms sending utils as a required argument

1.1.2 - Mar 4th - 2021
++++++

Updated length of username from 15 to 50
migration file added

1.1.1 - Feb 8th - 2021
++++++

* feature upgrade.
remove phonenumbers verification -> simple numeric check
not completely backward compatible

UNABLE_TO_PARSE_PHONE_NUMBER -> changed to INVALID_PHONE_NUMBER

1.1.0 - Feb 8th - 2021
++++++

* feature upgrade

1.0.28 - Nov 23 - 2020
++++++

* added deployment helper package

1.0.27 - Nov 19 - 2020
++++++

* Updated admin panel for user accounts

1.0.26 - Nov 12 - 2020
++++++

* Bug fix in get_user_ids_by_email_ids interface method

1.0.25 - Nov 9 - 2020
++++++

* Update get_user_ids_by_name_or_email interface method
* Added get_user_ids_by_email_ids interface method

1.0.24 - Nov 3 - 2020
++++++

* Add get_user_ids_by_name_or_email interface method


1.0.23 - Oct 17 - 2020
++++++

* Add send_reset_password_otp_to_recovery_phone_number, send_reset_password_otp_to_recovery_email interface methods
* Add verify_reset_password_otp_to_recovery_phone_number, verify_reset_password_otp_to_recovery_email interactors and interface methods


1.0.22 - Oct 15 - 2020
++++++

* Add login_with_username_and_password service interface method
* Add get_user_id_give_username interactor and interface method


1.0.21 - Oct 14 - 2020
++++++

* Change name filed in UserProfile model from CharField to TextField


1.0.20 - Oct 8 - 2020
++++++

* Bug fix in login in one device

1.0.19 - Oct 8 - 2020
++++++

* Bug fix in login in one device
* Storing user last login info
* few extra interface methods

1.0.18 - Sep 28 - 2020
++++++

* small bug fix in update profile and overriding the existing email verified to value, if new email is none

1.0.17 - Sep 23 - 2020
++++++

* moved otp constants inside functions to enable mocking in other apps to override the email / sms template


1.0.16 - Sep 21 - 2020
++++++

* bug fix create otp for whitelisted phone number api
* bug fix create otp for whitelisted email api
* added get or create referral code method in service interface

1.0.15 - Sep 13 - 2020
++++++
* bug fix in user update profile api

1.0.14 - Sep 13 - 2020
++++++
* bug fix in user update profile api

1.0.13 - Sep 13 - 2020
++++++
* bug fix in global log api
* bug fix in user update profile api

1.0.12 - Sep 10 - 2020
++++++
* corrected the django settings for ib users app to app level from base.py and enabled it for overriding in other apps
* added admin panels for all models

1.0.7
++++++
* Added account deactivation related logic

1.0.6
++++++
* Added configuring sender name in email

1.0.5
++++++
* Name in UserProfile can be empty

1.0.4
++++++
* Max length of profile pic in UserProfile updated

1.0.3
++++++
* ServiceInterface updated exposing different registration and profile related interfaces


1.0.2
++++++
* Tested and added the remaining implementations

1.0.1
++++++
* Initial implementation with login_with_device_details and logout_from_all_devices
